

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>AF score specification - version 4. &mdash; Amplification factor score  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Transforms" href="docstring/transforms.html" />
    <link rel="prev" title="Amplification factor score ADVO’s documentation" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> Amplification factor score
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Readme</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">AF score specification - version 4.</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#agenda">Agenda</a></li>
<li class="toctree-l2"><a class="reference internal" href="#introduction">1. Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#for-a-brand">For a brand</a></li>
<li class="toctree-l3"><a class="reference internal" href="#for-a-specific-user">For a specific user</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#context">2. Context</a></li>
<li class="toctree-l2"><a class="reference internal" href="#scope">3. Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="#scenarios">4. Scenarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="#kpis">5. KPIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#limitation">6. Limitation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#transform-from-raw-data-into-structural-knowledge-graph-data">Transform from raw data into structural knowledge graph data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">Agenda</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#nextstep">Nextstep:</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#prerequisite">1. Prerequisite</a></li>
<li class="toctree-l2"><a class="reference internal" href="#knowledge-graph-data-structure">2. Knowledge graph data structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="#transformation-process">3. Transformation process</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Package Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="docstring/transforms.html">Transforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="docstring/models.html">Node Embedding Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="docstring/utils.html">Utils</a></li>
</ul>
<p class="caption"><span class="caption-text">Index</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="indices.html">Indices and tables</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Amplification factor score</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>AF score specification - version 4.</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/.readme.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="af-score-specification-version-4">
<h1>AF score specification - version 4.<a class="headerlink" href="#af-score-specification-version-4" title="Permalink to this headline">¶</a></h1>
<p>R: Quan Tran</p>
<dl class="simple">
<dt>Modification date:</dt><dd><ul class="simple">
<li><p>2 - June - 2020 (v4.0)</p></li>
<li><p>3 - June - 2020 (v4.0)</p></li>
</ul>
</dd>
</dl>
<p>—</p>
<div class="section" id="agenda">
<h2>Agenda<a class="headerlink" href="#agenda" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p><a class="reference external" href="#introduction">Introduction</a></p></li>
<li><p><a class="reference external" href="#context">Context</a></p></li>
<li><p><a class="reference external" href="#scope">Scope</a></p></li>
<li><p><a class="reference external" href="#kpis">KPIs</a></p></li>
<li><p><a class="reference external" href="#limitation">Limitation</a></p></li>
</ol>
</div>
<hr class="docutils" />
<div class="section" id="introduction">
<h2>1. Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Amplifcation factor (AF) is one of <span class="math notranslate nohighlight">\(3\)</span> metrics of Advosights used
to measure the <strong>amplification of an individual in a specific network
where compagin are launched</strong>.</p>
<p>Generally, AF score requires <span class="math notranslate nohighlight">\(3\)</span> kinds of data: <em>User attributes</em>,
<em>User behaviors</em> and <em>Posts</em> (Figure below). These data forms the
structural data called <strong>Directed Knowledge Graph</strong>.</p>
<div class="figure align-default" id="id2">
<img alt="af\_input\_output" src="https://i.imgur.com/yTB518v.png" />
<p class="caption"><span class="caption-text">af_input_output</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<div class="section" id="for-a-brand">
<h3>For a brand<a class="headerlink" href="#for-a-brand" title="Permalink to this headline">¶</a></h3>
<p>Generally, the purpose of AF is to increase sale of business. In
particular, by measuring the AF of users, we can find out: * Which
users are the most influencers in a specific network * Predict how many
users are influenced by one given user * Predict which direction of
information when a user submit a new post</p>
<blockquote>
<div><p><em>For example, brand X owns a small community in Facebook (e.g, a FB
group of X). They aim to find out which users are most influencers
among ones to make them as potential KOLs. Thanks to their large and
fast diffusion, when they submit posts mentioning to X, other users
are able to easily get the information very quickly.</em></p>
</div></blockquote>
</div>
<div class="section" id="for-a-specific-user">
<h3>For a specific user<a class="headerlink" href="#for-a-specific-user" title="Permalink to this headline">¶</a></h3>
<p>When taking part in an advocated community of a brand, a user intents to
increase the amplication factor as much as possible due to: * The user
are going to be more potential to be hired by the brand * AF model is
able to predict how much user’s new post will be amplified in his
community * By monitoring the AF score, users are able to know things
needs to improve * User can directly measure AF to an other specific
users</p>
<blockquote>
<div><p><em>For example, user Y is in an advocated member in group G of brand
X. AF score is calculated by attributes of Y and others users in G.
When user Y intents to submit a new post, Y is able to be predicted
who users are likely to be influenced by that post. Y is also able
to measure AF to a specific user Z in G to know whether Z are
influenced by Y or not</em></p>
</div></blockquote>
</div>
</div>
<div class="section" id="context">
<h2>2. Context<a class="headerlink" href="#context" title="Permalink to this headline">¶</a></h2>
<p>AF score requires the commuinty networks among users. In particular, it
acquires <strong>set of users which some of them connected to each others</strong> to
form a <strong>graph network</strong> (see below figures).</p>
<div class="figure align-default" id="id3">
<img alt="graph\_example" src="https://i.imgur.com/IxqBzxn.gif" />
<p class="caption"><span class="caption-text">graph_example</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<p>Therfore, our AF score is assumpted to formulated by <em>user’s
attributes</em>, <em>user’s relationship</em> and <em>the corresponding posts</em>: *
<strong>User’s attributes</strong> are behavior of a user, these includes their
public information and their interaction on some specific social
networks in our purpose.</p>
<ul class="simple">
<li><p><strong>User’s relationship</strong> are the relationships between the concerned
user and the others in a network.</p></li>
<li><p><strong>User’s posts</strong> are the content of previous posts has been submited.</p></li>
</ul>
<div class="line-block">
<div class="line">The figure below visualizes the dependence of AF on user’s</div>
</div>
<p>relationship (user’s attributes) and posts.
| <a href="#id5"><span class="problematic" id="id6">|AF\_assumption|</span></a></p>
<p>Since we defined our problem as a knowledge graph which handles the
relationship among users, there are <span class="math notranslate nohighlight">\(3\)</span> things need to be
concerened: <em>users’ attributes</em>, <em>users’ relationship</em> and <em>their
corresponding posts</em>.</p>
<p>Users’ attributes contains <strong>their public information</strong> and <strong>behavior</strong>
in an social network. For a specific social context, these attributes
can vary depends on the supplied services of that social network</p>
<ul class="simple">
<li><p>version 4.0:
The current version is being experimented on Facebook database. As a
result, we concern on following <span class="math notranslate nohighlight">\(7\)</span> attributes (not including
<strong>id</strong> of users:</p>
<ul>
<li><p><strong>total_followers</strong>: number of followers (<span class="math notranslate nohighlight">\(0\)</span> if private)</p></li>
<li><p><strong>total_friends</strong>: number of friends of a user (<span class="math notranslate nohighlight">\(0\)</span> if
private)</p></li>
<li><p><strong>books_count</strong>: number of books user (<span class="math notranslate nohighlight">\(0\)</span> if private)</p></li>
<li><p><strong>films_count</strong>: number of films user (<span class="math notranslate nohighlight">\(0\)</span> if private)</p></li>
<li><p><strong>music_count</strong>: number of music user (<span class="math notranslate nohighlight">\(0\)</span> if private)</p></li>
<li><p><strong>restaurants_count</strong>: number of restaurants user (<span class="math notranslate nohighlight">\(0\)</span> if
private)</p></li>
<li><p><strong>sex</strong>: gender (<span class="math notranslate nohighlight">\(3\)</span> if private)</p></li>
</ul>
</li>
</ul>
<p>Is the way we define the relationship among users depending on specific
social network.</p>
<ul>
<li><div class="line-block">
<div class="line">version 4.0:</div>
<div class="line">The current version is being experimented on Facebook social</div>
</div>
<p>network. As a result, <strong>we define the relationship when a user
reacts, comments or shares on any post from other user</strong> (detail in
below figures). Then, we calculate the <strong>weight of relationship</strong> by</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">weights</span> <span class="o">=</span> <span class="mf">0.1</span><span class="o">*</span><span class="n">number</span> <span class="n">of</span> <span class="n">reactions</span> <span class="o">+</span> <span class="mf">0.3</span><span class="o">*</span><span class="n">number</span> <span class="n">of</span> <span class="n">comments</span> <span class="o">+</span> <span class="mf">0.6</span><span class="o">*</span><span class="n">number</span> <span class="n">of</span> <span class="n">shares</span>
</pre></div>
</div>
</li>
</ul>
<div class="figure align-default" id="id4">
<img alt="edge\_definition" src="https://i.imgur.com/l0iqTKO.png" />
<p class="caption"><span class="caption-text">edge_definition</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
<div class="line-block">
<div class="line">Are all the attributes of a specific user’s posts depending on</div>
</div>
<p>specific social netork. <strong>By crawling posts of users, we are able to
analyse useful features such as which topics user interested in, writing
style of user, etc</strong>. This also helps us know which style of post that
user can be easily influenced, since each user will prefer a specific
one. * version 4.0:
| We currently focus on posts’ contents that user submited</p>
</div>
<div class="section" id="scope">
<h2>3. Scope<a class="headerlink" href="#scope" title="Permalink to this headline">¶</a></h2>
<p>Below is all attributes requirements and their corresponding scope</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 8%" />
<col style="width: 37%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Scope</p></th>
<th class="head"><p>Requirement</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Number of users</p></td>
<td><p><span class="math notranslate nohighlight">\(&gt; 100\)</span></p></td>
<td><ul class="simple">
<li><p>Including KOLs and users who interact with them. - All users must have at least <span class="math notranslate nohighlight">\(1\)</span> connection with other user (avoid isolated user)</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>User attributes</p></td>
<td><p><span class="math notranslate nohighlight">\(7\)</span> attributes: total_followers, total_friends, books_count, films_count, music_count, restaurants_count, sex</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Number of posts per user</p></td>
<td><p><span class="math notranslate nohighlight">\(&gt; 10\)</span></p></td>
<td><p>Posts have: - Content - Number of reactions, shares, comments - Range of time: at least <span class="math notranslate nohighlight">\(&gt; 10\)</span> posts <span class="math notranslate nohighlight">\(1\)</span> latest month - Information of corrsponding user ids who interact</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="scenarios">
<h2>4. Scenarios<a class="headerlink" href="#scenarios" title="Permalink to this headline">¶</a></h2>
<p>Due to the variance of data provided by customers in compagins that they
are unable to sufficently supply full of requested information. We
provide <span class="math notranslate nohighlight">\(3\)</span> different scenarios that efficiently support for the
customer, vary from <em>non-information</em> to <em>full-information</em>. As a
consequence, there is a tradeoff among scenerios. The below table will
provide in detail:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11%" />
<col style="width: 26%" />
<col style="width: 34%" />
<col style="width: 10%" />
<col style="width: 18%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Scenerio</p></th>
<th class="head"><p>Used method</p></th>
<th class="head"><p>Attribute needed</p></th>
<th class="head"><p>Accuracy</p></th>
<th class="head"><p>Dedicated version</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(1\)</span></p></td>
<td><p>Node2vec</p></td>
<td><p>Only relationship among users needed</p></td>
<td><p>Low</p></td>
<td><p>v4.0</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(2\)</span></p></td>
<td><p>GAE or VGAE</p></td>
<td><p>User’s relationship and attribute</p></td>
<td><p>Medium</p></td>
<td><p>v4.1</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(3\)</span></p></td>
<td><p>GAE, VGAE + Word embedding</p></td>
<td><p>Above + Post content of user</p></td>
<td><p>High</p></td>
<td><p>v4.2</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="kpis">
<h2>5. KPIs<a class="headerlink" href="#kpis" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>[x] AF score version 4. proposal</p></li>
<li><p>[x] Overall data analytics</p></li>
<li><p>[x] Data preprocessing and transformation</p></li>
<li><p>[x] Training user embedding model</p></li>
<li><p>[ ] Release v4.0 and v4.1</p></li>
<li><p>[ ] Training post embedding model</p></li>
<li><p>[ ] Preparing training data for AF model</p></li>
<li><p>[ ] Training AF model</p></li>
<li><p>[ ] Release v4.2</p></li>
</ul>
</div>
<div class="section" id="limitation">
<h2>6. Limitation<a class="headerlink" href="#limitation" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Since AF score takes <strong>deep learning</strong> into account, the efficency of
AF score depends on the quality of data source and preprocessing
method. <em>For the current version (4.), we just take very simple
preprocessing method.</em></p></li>
<li><p>User’s attributes are invariance, depends on specific kind of social
network.</p></li>
<li><p>User’s attributes reach affordable number of attributes.</p></li>
</ul>
</div>
</div>
<div class="section" id="transform-from-raw-data-into-structural-knowledge-graph-data">
<h1>Transform from raw data into structural knowledge graph data<a class="headerlink" href="#transform-from-raw-data-into-structural-knowledge-graph-data" title="Permalink to this headline">¶</a></h1>
<p>R: QuanTran</p>
<dl class="simple">
<dt>Modification date:</dt><dd><ul class="simple">
<li><p>25 - May - 2020 (v.2.0)</p></li>
<li><p>1 - Jun - 2020 (v.2.1)</p></li>
</ul>
</dd>
</dl>
<p><em>Transfrom from raw data into structural knowledge graph data</em></p>
<hr class="docutils" />
<div class="section" id="id1">
<h2>Agenda<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p><a class="reference external" href="#prerequisite">Prerequisite</a></p></li>
<li><dl>
<dt><a class="reference external" href="#knowledge_graph_data_structure">Knowledge graph data structure</a></dt><dd><div class="line-block">
<div class="line">2.1. <a class="reference external" href="#edge_list">Edge list</a></div>
<div class="line">2.2. <a class="reference external" href="#node_attribute">User attribute (Node attribute)</a></div>
<div class="line">2.3. <a class="reference external" href="#edge_attribute">Edge attribute</a></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt><a class="reference external" href="#transformation">Transformation process</a></dt><dd><div class="line-block">
<div class="line">3.1. <a class="reference external" href="#building_edge_list">Building edge list</a></div>
<div class="line">3.2. <a class="reference external" href="#building_node_attribute">Building node attribute</a></div>
<div class="line">3.3. <a class="reference external" href="#building_edge_attribute">Building edge attribute</a></div>
</div>
</dd>
</dl>
</li>
<li><p><a class="reference external" href="#code">Code</a></p></li>
</ol>
<div class="section" id="nextstep">
<h3>Nextstep:<a class="headerlink" href="#nextstep" title="Permalink to this headline">¶</a></h3>
<p>Two options for Node Embedding * <a class="reference external" href="http://14.161.9.65:9012/tree/Quan/Advosights/adv/sources/AF_scire_GG.ipynb">Node2vec embedding with
Pytorch</a>
(<em>Temporary official</em>) * <a class="reference external" href="http://14.161.9.65:9012/notebooks/Quan/Advosights/adv/sources/AF_score%20graph%20autoencoder.ipynb">Graph auto-encoder with
Pytorch</a>
(<em>On-going research</em>) —</p>
</div>
</div>
<hr class="docutils" />
<div class="section" id="prerequisite">
<h2>1. Prerequisite<a class="headerlink" href="#prerequisite" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">chosen_users.csv</span></code>: Pandas Dataframe of concerned users for graph</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">chosen_post_2.csv</span></code>: Pandas Dataframe of concerend posts</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">chosen_comment.csv</span></code>: Pandas Dataframe of concerned comments
related to our knowledge graph</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">chosen_react.csv</span></code>: Pandas Dataframe of concerned reactions related
to our knowledge graph</p></li>
</ul>
<p><em>All files came from `the preprocessing
script &lt;http://14.161.9.65:9012/notebooks/Quan/Advosights/adv/sources/AF_score_data_analytics.ipynb&gt;`__</em></p>
</div>
<hr class="docutils" />
<div class="section" id="knowledge-graph-data-structure">
<h2>2. Knowledge graph data structure<a class="headerlink" href="#knowledge-graph-data-structure" title="Permalink to this headline">¶</a></h2>
<p>Building graph data contains the following data structures: <strong>edge list,
node attribute, edge attribute</strong>. All are structured by Python
dictionary type.</p>
<p>Python dictionary with type</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="n">user_id_A</span><span class="p">:</span> <span class="p">[</span><span class="n">user_id_1</span><span class="p">,</span> <span class="n">user_id_7</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
    <span class="n">user_id_B</span><span class="p">:</span> <span class="p">[</span><span class="n">user_id_3</span><span class="p">,</span> <span class="n">user_id_4</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
    <span class="n">user_id_C</span><span class="p">:</span> <span class="p">[</span><span class="n">user_id_1</span><span class="p">,</span> <span class="n">user_id_5</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Keys of edge list are all distincted user ids, and the corresponding
values are those users who are influenced.</p>
<p><em>For example, ``user_id_A`` influences on those users ``user_id_1``,
``user_id_2``, ….In particular, we officially defined the influence
based on whether ``user_id_1``, ``user_id_2``, … react, comment, share
on posts of ``user_id_A``</em></p>
<p>Every identical users (nodes) in our graph have their own attributes
(informations).</p>
<blockquote>
<div><p>For the current version, we mostly concern on: <strong>total_follower,
total_friend, books_count, films_count, music_count,
restaurants_count, sex</strong></p>
</div></blockquote>
<p>Data structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="n">user_id_A</span><span class="p">:</span> <span class="p">[</span> <span class="n">attrA_1</span><span class="p">,</span> <span class="n">attrA_2</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">attrA_n</span><span class="p">],</span>
    <span class="n">user_id_B</span><span class="p">:</span> <span class="p">[</span> <span class="n">attrB_1</span><span class="p">,</span> <span class="n">attrB_2</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">attrB_n</span><span class="p">],</span>
    <span class="n">user_id_C</span><span class="p">:</span> <span class="p">[</span> <span class="n">attrC_1</span><span class="p">,</span> <span class="n">attrC_2</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">attrC_n</span><span class="p">],</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Keys are identical user ids, values are numpy array of corresponding
attributes in numerical data type</p>
<p>We arm to build weighted knowledge graph which is each edge are weighted
by their own attributes.</p>
<blockquote>
<div><p>For the current version, we offically define the edge attribute
belongs to the number of reactions, comments and shares</p>
</div></blockquote>
<p><em>For example: user B reacted, commented or shared some posts from A, we
summary that B do :math:`10` shares, :math:`20` comments and :math:`125`
reactions from some posts of A, then</em></p>
<div class="math notranslate nohighlight">
\[A \longrightarrow [20, 20, 125] \longrightarrow B\]</div>
<p>We finally ends up with the following structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="n">user_id_A</span><span class="p">:</span> <span class="p">[</span> <span class="p">[</span><span class="n">n_shares</span><span class="p">,</span> <span class="n">n_cmts</span><span class="p">,</span> <span class="n">n_reacts</span><span class="p">],</span> <span class="p">[</span><span class="n">n_shares</span><span class="p">,</span> <span class="n">n_cmts</span><span class="p">,</span> <span class="n">n_reacts</span><span class="p">],</span> <span class="o">...</span><span class="p">],</span>
    <span class="n">user_id_B</span><span class="p">:</span> <span class="p">[</span> <span class="p">[</span><span class="n">n_shares</span><span class="p">,</span> <span class="n">n_cmts</span><span class="p">,</span> <span class="n">n_reacts</span><span class="p">],</span> <span class="p">[</span><span class="n">n_shares</span><span class="p">,</span> <span class="n">n_cmts</span><span class="p">,</span> <span class="n">n_reacts</span><span class="p">],</span> <span class="o">...</span><span class="p">],</span>
    <span class="n">user_id_C</span><span class="p">:</span> <span class="p">[</span> <span class="p">[</span><span class="n">n_shares</span><span class="p">,</span> <span class="n">n_cmts</span><span class="p">,</span> <span class="n">n_reacts</span><span class="p">],</span> <span class="p">[</span><span class="n">n_shares</span><span class="p">,</span> <span class="n">n_cmts</span><span class="p">,</span> <span class="n">n_reacts</span><span class="p">],</span> <span class="o">...</span><span class="p">],</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The orders of keys and corresponding values absolutely respect to ones
of <strong>edge list</strong> data strucutre.</p>
<p><em>For example, values ``user_id_A`` is a Python list contains multiple
numpy arrays describing number of shares, comments, reactions
respectively of corresponding indices from edge list. That is, first
numpy array belongs to ``user_id_1``, the second one belones to
``user_id_7``, …</em></p>
</div>
<hr class="docutils" />
<div class="section" id="transformation-process">
<h2>3. Transformation process<a class="headerlink" href="#transformation-process" title="Permalink to this headline">¶</a></h2>
<p>All prerequisited files are csv, the idea to transfer is
straight-forward as bellows:</p>
<p>which means we are going to group our post ids by user ids. In other
words, we want to know <strong>who users commit which posts?</strong></p>
<p>Data structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="n">user_id_A</span><span class="p">:</span> <span class="p">[</span><span class="n">post_idA_1</span><span class="p">,</span> <span class="n">post_idA_2</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
    <span class="n">user_id_B</span><span class="p">:</span> <span class="p">[</span><span class="n">post_idB_1</span><span class="p">,</span> <span class="n">post_idB_2</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
    <span class="n">user_id_C</span><span class="p">:</span> <span class="p">[</span><span class="n">post_idC_1</span><span class="p">,</span> <span class="n">post_idC_2</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>which means we group our user ids who share by post ids. <strong>Which posts
are shared by who users?</strong></p>
<p>Data structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="n">post_id_A</span><span class="p">:</span> <span class="p">[</span><span class="n">user_id_1</span><span class="p">,</span> <span class="n">user_id_2</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
    <span class="n">post_id_B</span><span class="p">:</span> <span class="p">[</span><span class="n">user_id_3</span><span class="p">,</span> <span class="n">user_id_7</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
    <span class="n">post_id_C</span><span class="p">:</span> <span class="p">[</span><span class="n">user_id_3</span><span class="p">,</span> <span class="n">user_id_14</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>we means we group our user ids who comment by post_ids. <strong>Which posts
are commented by who users?</strong></p>
<p>Data structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="n">post_id_A</span><span class="p">:</span> <span class="p">[</span><span class="n">user_id_1</span><span class="p">,</span> <span class="n">user_id_2</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
    <span class="n">post_id_B</span><span class="p">:</span> <span class="p">[</span><span class="n">user_id_3</span><span class="p">,</span> <span class="n">user_id_7</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
    <span class="n">post_id_C</span><span class="p">:</span> <span class="p">[</span><span class="n">user_id_3</span><span class="p">,</span> <span class="n">user_id_14</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>we means we group our user ids who react by post_ids. <strong>Which posts are
reacted by who users?</strong></p>
<p>Data structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="n">post_id_A</span><span class="p">:</span> <span class="p">[</span><span class="n">user_id_1</span><span class="p">,</span> <span class="n">user_id_2</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
    <span class="n">post_id_B</span><span class="p">:</span> <span class="p">[</span><span class="n">user_id_3</span><span class="p">,</span> <span class="n">user_id_7</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
    <span class="n">post_id_C</span><span class="p">:</span> <span class="p">[</span><span class="n">user_id_3</span><span class="p">,</span> <span class="n">user_id_14</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>For each post id of identical user id, find those users who share,
comment, react on that post, then we have the edge list of that user id</p>
<p><code class="docutils literal notranslate"><span class="pre">user_id</span> <span class="pre">-</span> <span class="pre">post_ids</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;02542465&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;01255_21254&#39;</span><span class="p">,</span> <span class="s1">&#39;12354_13244&#39;</span><span class="p">],</span>
    <span class="s1">&#39;12357846&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;12155_12545&#39;</span><span class="p">,</span> <span class="s1">&#39;12485_54877&#39;</span><span class="p">],</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">post_id</span> <span class="pre">-</span> <span class="pre">user_ids</span> <span class="pre">share</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;01255_21254&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;12357846&#39;</span><span class="p">,</span> <span class="s1">&#39;457851&#39;</span><span class="p">],</span>
    <span class="s1">&#39;12354_13244&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;124556&#39;</span><span class="p">],</span>
    <span class="s1">&#39;12155_12545&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;254635&#39;</span><span class="p">],</span>
    <span class="s1">&#39;12485_54877&#39;</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">post_id</span> <span class="pre">-</span> <span class="pre">user_ids</span> <span class="pre">comment</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;01255_21254&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;457851&#39;</span><span class="p">],</span>
    <span class="s1">&#39;12354_13244&#39;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="s1">&#39;12155_12545&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;124556&#39;</span><span class="p">,</span> <span class="s1">&#39;254635&#39;</span><span class="p">],</span>
    <span class="s1">&#39;12485_54877&#39;</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">post_id</span> <span class="pre">-</span> <span class="pre">user_ids</span> <span class="pre">react</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;01255_21254&#39;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="s1">&#39;12354_13244&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;254635&#39;</span><span class="p">],</span>
    <span class="s1">&#39;12155_12545&#39;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="s1">&#39;12485_54877&#39;</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>As a result, the <strong>edge list</strong> is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;02542465&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;12357846&#39;</span><span class="p">,</span> <span class="s1">&#39;457851&#39;</span><span class="p">],</span>
<span class="s1">&#39;12357846&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;254635&#39;</span><span class="p">,</span> <span class="s1">&#39;124556&#39;</span><span class="p">,</span> <span class="s1">&#39;254635&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Get all unique user ids from <strong>edge list</strong>, then query from
<code class="docutils literal notranslate"><span class="pre">chosen_users.csv</span></code> to get final attributes in numeric. As being
concerned, we focus on <strong>total_follower, total_friend, books_count,
films_count, music_count, restaurants_count, sex</strong>.</p>
<p>We build <span class="math notranslate nohighlight">\(3\)</span> data structures: <code class="docutils literal notranslate"><span class="pre">edge_share</span></code>, <code class="docutils literal notranslate"><span class="pre">edge_comment</span></code>,
<code class="docutils literal notranslate"><span class="pre">edge_react</span></code></p>
<blockquote>
<div><dl>
<dt>The main idea to execute:</dt><dd><div class="line-block">
<div class="line">1. Loop through key- values <code class="docutils literal notranslate"><span class="pre">k,v</span></code> in <code class="docutils literal notranslate"><span class="pre">edge_list</span></code></div>
<div class="line">2. Get all post ids of <code class="docutils literal notranslate"><span class="pre">k</span></code> in <code class="docutils literal notranslate"><span class="pre">user</span> <span class="pre">id</span> <span class="pre">-</span> <span class="pre">post</span> <span class="pre">ids</span></code></div>
<div class="line">3. Query in data frame: depends on particular dataframe (share, comment, react), represented by Python dictionary</div>
</div>
</dd>
</dl>
</div></blockquote>
<p>Data structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="n">user_id_A</span><span class="p">:</span> <span class="p">[</span><span class="n">n_share</span><span class="o">/</span><span class="n">cmt</span><span class="o">/</span><span class="n">react</span> <span class="n">of</span> <span class="n">user_idA_1</span><span class="p">,</span> <span class="n">n_share</span><span class="o">/</span><span class="n">cmt</span><span class="o">/</span><span class="n">react</span> <span class="n">of</span> <span class="n">user_idA_2</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
    <span class="n">user_id_B</span><span class="p">:</span> <span class="p">[</span><span class="n">n_share</span><span class="o">/</span><span class="n">cmt</span><span class="o">/</span><span class="n">react</span> <span class="n">of</span> <span class="n">user_idB_1</span><span class="p">,</span> <span class="n">n_share</span><span class="o">/</span><span class="n">cmt</span><span class="o">/</span><span class="n">react</span> <span class="n">of</span> <span class="n">user_idB_2</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
    <span class="n">user_id_C</span><span class="p">:</span> <span class="p">[</span><span class="n">n_share</span><span class="o">/</span><span class="n">cmt</span><span class="o">/</span><span class="n">react</span> <span class="n">of</span> <span class="n">user_idC_1</span><span class="p">,</span> <span class="n">n_share</span><span class="o">/</span><span class="n">cmt</span><span class="o">/</span><span class="n">react</span> <span class="n">of</span> <span class="n">user_idC_2</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Query from <code class="docutils literal notranslate"><span class="pre">chosen_post_2.csv</span></code>: <em>from user is in ``v`` and parent id
is in ``post ids``, group by from user on fid, count</em></p>
<p>Query from <code class="docutils literal notranslate"><span class="pre">chosen_comment.csv</span></code>: <em>from user is in ``v`` and post id is
in ``post ids``, group by from user on post id, count</em></p>
<p>Query from <code class="docutils literal notranslate"><span class="pre">chosen_react.csv</span></code>: <em>from from user id is in ``v`` and fid
is in ``post ids``, group by from user id on fid, count</em></p>
<p>From above dictionaries, concatente share, comment and reaction based on
their indices</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="docstring/transforms.html" class="btn btn-neutral float-right" title="Transforms" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Amplification factor score ADVO’s documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Quan Tran

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>